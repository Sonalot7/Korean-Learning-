<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Korean Quiz</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container">
    <h1 class="title">Korean Language Quiz</h1>

    <div id="quiz-box">
      <p id="question"></p>

      <div id="options"></div>

      <input id="text-answer" type="text" placeholder="Type your answer here" style="display:none;" />

      <button id="submit-btn" onclick="submitAnswer()">Submit</button>

      <p id="result"></p>
      <p id="score"></p>

      <button id="next-btn" onclick="loadNextQuestion()" style="display:none;">Next Question</button>
    </div>

  </div>

<script>
/* --------------------------
   QUIZ QUESTIONS (MERGED)
--------------------------- */

// Multiple choice
const mcqQuestions = [
  { q: "What is 안녕하세요?", options: ["Hello", "Goodbye", "Thanks", "Sorry"], answer: "Hello" },
  { q: "What is 감사합니다?", options: ["Sorry", "Thank you", "Hello", "Excuse me"], answer: "Thank you" },
  { q: "Korean word for 'Water'?", options: ["불", "물", "눈", "문"], answer: "물" },
  { q: "What is 사랑?", options: ["Hate", "Love", "Friend", "Food"], answer: "Love" },
  { q: "What is 학교?", options: ["Library", "Home", "School", "Hospital"], answer: "School" },
  { q: "What is 사람?", options: ["Dog", "Cat", "Person", "Child"], answer: "Person" },
  { q: "What is 음식?", options: ["Food", "Drink", "Money", "Bag"], answer: "Food" },
  { q: "Meaning of 시간?", options: ["Clock", "Hour", "Time", "Day"], answer: "Time" },
  { q: "What is 한국?", options: ["Korea", "Japan", "China", "USA"], answer: "Korea" },
  { q: "Meaning of 책?", options: ["Pen", "Bag", "Book", "Room"], answer: "Book" },
];

// Typing questions
const typingQuestions = [
  { q: "Type the Korean word: Hello", answer: "안녕하세요" },
  { q: "Type the Korean word: Thank you", answer: "감사합니다" },
  { q: "Type the Korean word: Love", answer: "사랑" },
  { q: "Type the Korean word: Food", answer: "음식" },
  { q: "Type the Korean word: Water", answer: "물" },
  { q: "Type the Korean word: School", answer: "학교" },
  { q: "Type the Korean word: Korea", answer: "한국" },
  { q: "Type the Korean word: Person", answer: "사람" },
  { q: "Type the Korean word: Book", answer: "책" },
  { q: "Type the Korean word: Time", answer: "시간" },
];

let allQuestions = []; 
let currentIndex = 0;
let score = 0;
let currentQuestion;

// Shuffle function
function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

// Start quiz
function startQuiz() {
  allQuestions = shuffle([...mcqQuestions, ...typingQuestions]).slice(0, 20);
  loadNextQuestion();
}

function loadNextQuestion() {
  document.getElementById("result").innerText = "";
  document.getElementById("next-btn").style.display = "none";
  document.getElementById("submit-btn").style.display = "block";

  if (currentIndex >= allQuestions.length) {
    document.getElementById("quiz-box").innerHTML =
      `<h2>Quiz Completed!</h2><p>Your Score: ${score} / ${allQuestions.length}</p>`;
    return;
  }

  currentQuestion = allQuestions[currentIndex];
  document.getElementById("question").innerText = currentQuestion.q;

  const optionsBox = document.getElementById("options");
  const textAnswer = document.getElementById("text-answer");

  // If MCQ type
  if (currentQuestion.options) {
    optionsBox.innerHTML = "";
    textAnswer.style.display = "none";

    currentQuestion.options.forEach(opt => {
      optionsBox.innerHTML += `
        <button class="option-btn" onclick="selectOption('${opt}')">${opt}</button>
      `;
    });
  }
  // If typing question
  else {
    optionsBox.innerHTML = "";
    textAnswer.style.display = "block";
    textAnswer.value = "";
  }
}

let selectedOption = "";

function selectOption(option) {
  selectedOption = option;
}

function submitAnswer() {
  let result = document.getElementById("result");
  const textAnswer = document.getElementById("text-answer");

  let userAnswer = selectedOption || textAnswer.value.trim();

  if (!userAnswer) {
    result.innerText = "Please select or type an answer!";
    return;
  }

  if (userAnswer == currentQuestion.answer) {
    result.innerHTML = "✔ Correct!";
    result.style.color = "green";
    score++;
  } else {
    result.innerHTML = `✘ Wrong! Correct answer: ${currentQuestion.answer}`;
    result.style.color = "red";
  }

  document.getElementById("score").innerText = `Score: ${score}`;
  document.getElementById("submit-btn").style.display = "none";
  document.getElementById("next-btn").style.display = "block";

  selectedOption = "";
  currentIndex++;
}

window.onload = startQuiz;
</script>

</body>
</html>

